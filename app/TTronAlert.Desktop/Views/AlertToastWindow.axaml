<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:TTronAlert.Desktop.ViewModels"
        x:Class="TTronAlert.Desktop.Views.AlertToastWindow"
        x:DataType="vm:AlertItemViewModel"
        SystemDecorations="None"
        TransparencyLevelHint="None"
        Background="Transparent"
        CanResize="False"
        ShowInTaskbar="False"
        Topmost="True"
        Width="420"
        Height="120"
        WindowStartupLocation="Manual">
    <Border x:Name="ToastBorder"
            Background="#000000"
            BorderBrush="#4A0E80"
            BorderThickness="1"
            CornerRadius="10"
            Padding="12"
            Opacity="0"
            ClipToBounds="True">
        <Border.Transitions>
            <Transitions>
                <DoubleTransition Property="Opacity" Duration="0:0:0.3" Easing="QuadraticEaseInOut"/>
                <TransformOperationsTransition Property="RenderTransform" Duration="0:0:0.3" Easing="QuadraticEaseInOut"/>
            </Transitions>
        </Border.Transitions>
        <Border.RenderTransform>
            <TranslateTransform X="400" Y="0"/>
        </Border.RenderTransform>
        <Grid ColumnDefinitions="Auto,*,Auto" RowDefinitions="Auto,*">
            <Image Grid.RowSpan="2"
                   Grid.Column="0"
                   Source="avares://TTronAlert.Desktop/Assets/logo.png"
                   Width="48"
                   Height="48"
                   Margin="0,0,12,0"/>
            <TextBlock Grid.Column="1" Grid.Row="0"
                       Text="{Binding Title}"
                       FontSize="16"
                       FontWeight="Bold"
                       FontFamily="Arial"
                       Foreground="#FFFFFF"
                       TextWrapping="Wrap"/>
            <TextBlock Grid.Column="1" Grid.Row="1"
                       Text="{Binding Message}"
                       FontSize="13"
                       FontFamily="Arial"
                       Foreground="#FFFFFF"
                       TextWrapping="Wrap"
                       MaxHeight="60"/>
            
            <!-- TimeAgo en haut à droite -->
            <Border Grid.Column="2" Grid.Row="1"
                    Background="#000000"
                    BorderBrush="#4A0E80"
                    BorderThickness="1"
                    CornerRadius="6"
                    Padding="12"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Top">
                <TextBlock Text="{Binding TimeAgo}" FontSize="12" FontFamily="Arial" Foreground="#FFFFFF"/>
            </Border>
            
            <!-- Level en bas à droite -->
            <Border Grid.Column="2" Grid.Row="1"
                    Classes.info="{Binding IsInfo}"
                    Classes.warning="{Binding IsWarning}"
                    Classes.critical="{Binding IsCritical}"
                    BorderBrush="#FFFFFF"
                    BorderThickness="1"
                    CornerRadius="6"
                    Padding="8"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Bottom">
                <TextBlock Text="{Binding LevelText}" FontSize="12" FontFamily="Arial" Foreground="#000000"/>
            </Border>
            
            <!-- Bouton de fermeture '✖' dans le coin supérieur droit, avec fond légèrement contrasté (gris foncé #333333) -->
            <Button Grid.Column="2" Grid.Row="0"
                    Content="x"
                    Width="25"
                    Height="25"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Top"
                    Margin="0, -12, -12, 0"
                    Background="#333333"
                    BorderBrush="#333333"
                    BorderThickness="1"
                    CornerRadius="40"
                    FontSize="10"
                    FontWeight="Bold"
                    FontFamily="Arial"
                    Foreground="#FFFFFF"
                    Click="CloseButton_Click"/>
        </Grid>
    </Border>
</Window>